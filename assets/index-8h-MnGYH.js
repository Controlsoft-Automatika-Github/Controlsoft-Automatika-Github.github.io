var Be=Object.defineProperty;var Ve=(t,e,n)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var O=(t,e,n)=>(Ve(t,typeof e!="symbol"?e+"":e,n),n),ve=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var T=(t,e,n)=>(ve(t,e,"read from private field"),n?n.call(t):e.get(t)),z=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},I=(t,e,n,r)=>(ve(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const _ of o)if(_.type==="childList")for(const s of _.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const _={};return o.integrity&&(_.integrity=o.integrity),o.referrerPolicy&&(_.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?_.credentials="include":o.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(o){if(o.ep)return;o.ep=!0;const _=n(o);fetch(o.href,_)}})();var Z,h,Ue,$,me,He,oe,M={},ce=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray;function P(t,e){for(var n in e)t[n]=e[n];return t}function Ie(t){var e=t.parentNode;e&&e.removeChild(t)}function ze(t,e,n){var r,o,_,s={};for(_ in e)_=="key"?r=e[_]:_=="ref"?o=e[_]:s[_]=e[_];if(arguments.length>2&&(s.children=arguments.length>3?Z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)s[_]===void 0&&(s[_]=t.defaultProps[_]);return R(t,s,r,o,null)}function R(t,e,n,r,o){var _={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Ue,__i:-1,__u:0};return o==null&&h.vnode!=null&&h.vnode(_),_}function X(t){return t.children}function J(t,e){this.props=t,this.context=e}function x(t,e){if(e==null)return t.__?x(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?x(t):null}function qe(t,e,n){var r,o=t.__v,_=o.__e,s=t.__P;if(s)return(r=P({},o)).__v=o.__v+1,h.vnode&&h.vnode(r),ue(s,r,o,t.__n,s.ownerSVGElement!==void 0,32&o.__u?[_]:null,e,_??x(o),!!(32&o.__u),n),r.__v=o.__v,r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=_&&Ee(r),r}function Ee(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ee(t)}}function ye(t){(!t.__d&&(t.__d=!0)&&$.push(t)&&!Q.__r++||me!==h.debounceRendering)&&((me=h.debounceRendering)||He)(Q)}function Q(){var t,e,n,r=[],o=[];for($.sort(oe);t=$.shift();)t.__d&&(n=$.length,e=qe(t,r,o)||e,n===0||$.length>n?(_e(r,e,o),o.length=r.length=0,e=void 0,$.sort(oe)):e&&h.__c&&h.__c(e,ce));e&&_e(r,e,o),Q.__r=0}function De(t,e,n,r,o,_,s,l,a,c,f){var i,v,u,y,w,b=r&&r.__k||ce,d=e.length;for(n.__d=a,Re(n,e,b),a=n.__d,i=0;i<d;i++)(u=n.__k[i])!=null&&typeof u!="boolean"&&typeof u!="function"&&(v=u.__i===-1?M:b[u.__i]||M,u.__i=i,ue(t,u,v,o,_,s,l,a,c,f),y=u.__e,u.ref&&v.ref!=u.ref&&(v.ref&&fe(v.ref,null,u),f.push(u.ref,u.__c||y,u)),w==null&&y!=null&&(w=y),65536&u.__u||v.__k===u.__k?a=Fe(u,a,t):typeof u.type=="function"&&u.__d!==void 0?a=u.__d:y&&(a=y.nextSibling),u.__d=void 0,u.__u&=-196609);n.__d=a,n.__e=w}function Re(t,e,n){var r,o,_,s,l,a=e.length,c=n.length,f=c,i=0;for(t.__k=[],r=0;r<a;r++)(o=t.__k[r]=(o=e[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?R(null,o,null,null,o):ae(o)?R(X,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?R(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=t,o.__b=t.__b+1,l=Je(o,n,s=r+i,f),o.__i=l,_=null,l!==-1&&(f--,(_=n[l])&&(_.__u|=131072)),_==null||_.__v===null?(l==-1&&i--,typeof o.type!="function"&&(o.__u|=65536)):l!==s&&(l===s+1?i++:l>s?f>a-s?i+=l-s:i--:i=l<s&&l==s-1?l-s:0,l!==r+i&&(o.__u|=65536))):(_=n[r])&&_.key==null&&_.__e&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=x(_)),ie(_,_,!1),n[r]=null,f--);if(f)for(r=0;r<c;r++)(_=n[r])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=x(_)),ie(_,_))}function Fe(t,e,n){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=Fe(r[o],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Je(t,e,n,r){var o=t.key,_=t.type,s=n-1,l=n+1,a=e[n];if(a===null||a&&o==a.key&&_===a.type)return n;if(r>(a!=null&&!(131072&a.__u)?1:0))for(;s>=0||l<e.length;){if(s>=0){if((a=e[s])&&!(131072&a.__u)&&o==a.key&&_===a.type)return s;s--}if(l<e.length){if((a=e[l])&&!(131072&a.__u)&&o==a.key&&_===a.type)return l;l++}}return-1}function ge(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Ke.test(e)?n:n+"px"}function q(t,e,n,r,o){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||ge(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||ge(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,_?Se:be,_)):t.removeEventListener(e,_?Se:be,_);else{if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function be(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(h.event?h.event(t):t)}}function Se(t){if(this.l)return this.l[t.type+!0](h.event?h.event(t):t)}function ue(t,e,n,r,o,_,s,l,a,c){var f,i,v,u,y,w,b,d,m,N,A,k,he,V,te,C=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(a=!!(32&n.__u),_=[l=e.__e=n.__e]),(f=h.__b)&&f(e);e:if(typeof C=="function")try{if(d=e.props,m=(f=C.contextType)&&r[f.__c],N=f?m?m.props.value:f.__:r,n.__c?b=(i=e.__c=n.__c).__=i.__E:("prototype"in C&&C.prototype.render?e.__c=i=new C(d,N):(e.__c=i=new J(d,N),i.constructor=C,i.render=je),m&&m.sub(i),i.props=d,i.state||(i.state={}),i.context=N,i.__n=r,v=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),C.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=P({},i.__s)),P(i.__s,C.getDerivedStateFromProps(d,i.__s))),u=i.props,y=i.state,i.__v=e,v)C.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(C.getDerivedStateFromProps==null&&d!==u&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(d,N),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(d,i.__s,N)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=d,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(K){K&&(K.__=e)}),A=0;A<i._sb.length;A++)i.__h.push(i._sb[A]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(d,i.__s,N),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(u,y,w)})}if(i.context=N,i.props=d,i.__P=t,i.__e=!1,k=h.__r,he=0,"prototype"in C&&C.prototype.render){for(i.state=i.__s,i.__d=!1,k&&k(e),f=i.render(i.props,i.state,i.context),V=0;V<i._sb.length;V++)i.__h.push(i._sb[V]);i._sb=[]}else do i.__d=!1,k&&k(e),f=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++he<25);i.state=i.__s,i.getChildContext!=null&&(r=P(P({},r),i.getChildContext())),v||i.getSnapshotBeforeUpdate==null||(w=i.getSnapshotBeforeUpdate(u,y)),De(t,ae(te=f!=null&&f.type===X&&f.key==null?f.props.children:f)?te:[te],e,n,r,o,_,s,l,a,c),i.base=e.__e,e.__u&=-161,i.__h.length&&s.push(i),b&&(i.__E=i.__=null)}catch(K){e.__v=null,a||_!=null?(e.__e=l,e.__u|=a?160:32,_[_.indexOf(l)]=null):(e.__e=n.__e,e.__k=n.__k),h.__e(K,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Ge(n.__e,e,n,r,o,_,s,a,c);(f=h.diffed)&&f(e)}function _e(t,e,n){for(var r=0;r<n.length;r++)fe(n[r],n[++r],n[++r]);h.__c&&h.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(_){_.call(o)})}catch(_){h.__e(_,o.__v)}})}function Ge(t,e,n,r,o,_,s,l,a){var c,f,i,v,u,y,w,b=n.props,d=e.props,m=e.type;if(m==="svg"&&(o=!0),_!=null){for(c=0;c<_.length;c++)if((u=_[c])&&"setAttribute"in u==!!m&&(m?u.localName===m:u.nodeType===3)){t=u,_[c]=null;break}}if(t==null){if(m===null)return document.createTextNode(d);t=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,d.is&&d),_=null,l=!1}if(m===null)b===d||l&&t.data===d||(t.data=d);else{if(_=_&&Z.call(t.childNodes),b=n.props||M,!l&&_!=null)for(b={},c=0;c<t.attributes.length;c++)b[(u=t.attributes[c]).name]=u.value;for(c in b)u=b[c],c=="children"||(c=="dangerouslySetInnerHTML"?i=u:c==="key"||c in d||q(t,c,null,u,o));for(c in d)u=d[c],c=="children"?v=u:c=="dangerouslySetInnerHTML"?f=u:c=="value"?y=u:c=="checked"?w=u:c==="key"||l&&typeof u!="function"||b[c]===u||q(t,c,u,b[c],o);if(f)l||i&&(f.__html===i.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(i&&(t.innerHTML=""),De(t,ae(v)?v:[v],e,n,r,o&&m!=="foreignObject",_,s,_?_[0]:n.__k&&x(n,0),l,a),_!=null)for(c=_.length;c--;)_[c]!=null&&Ie(_[c]);l||(c="value",y!==void 0&&(y!==t[c]||m==="progress"&&!y||m==="option"&&y!==b[c])&&q(t,c,y,b[c],!1),c="checked",w!==void 0&&w!==t[c]&&q(t,c,w,b[c],!1))}return t}function fe(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){h.__e(r,n)}}function ie(t,e,n){var r,o;if(h.unmount&&h.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||fe(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(_){h.__e(_,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&ie(r[o],e,n||typeof t.type!="function");n||t.__e==null||Ie(t.__e),t.__=t.__e=t.__d=void 0}function je(t,e,n){return this.constructor(t,n)}function Qe(t,e,n){var r,o,_,s;h.__&&h.__(t,e),o=(r=typeof n=="function")?null:n&&n.__k||e.__k,_=[],s=[],ue(e,t=(!r&&n||e).__k=ze(X,null,[t]),o||M,M,e.ownerSVGElement!==void 0,!r&&n?[n]:o?null:e.firstChild?Z.call(e.childNodes):null,_,!r&&n?n:o?o.__e:e.firstChild,r,s),t.__d=void 0,_e(_,t,s)}Z=ce.slice,h={__e:function(t,e,n,r){for(var o,_,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((_=o.constructor)&&_.getDerivedStateFromError!=null&&(o.setState(_.getDerivedStateFromError(t)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),s=o.__d),s)return o.__E=o}catch(l){t=l}throw t}},Ue=0,J.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=P({},this.state),typeof t=="function"&&(t=t(P({},n),this.props)),t&&P(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ye(this))},J.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ye(this))},J.prototype.render=X,$=[],He=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oe=function(t,e){return t.__v.__b-e.__v.__b},Q.__r=0;var W,g,ne,we,Y=0,xe=[],G=[],S=h,ke=S.__b,Ne=S.__r,Ce=S.diffed,Ae=S.__c,Pe=S.unmount,Le=S.__;function de(t,e){S.__h&&S.__h(g,t,Y||e),Y=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:G}),n.__[t]}function E(t){return Y=1,Oe(We,t)}function Oe(t,e,n){var r=de(W++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):We(void 0,e),function(l){var a=r.__N?r.__N[0]:r.__[0],c=r.t(a,l);a!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=g,!g.u)){var o=function(l,a,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(v){return!!v.__c});if(f.every(function(v){return!v.__N}))return!_||_.call(this,l,a,c);var i=!1;return f.forEach(function(v){if(v.__N){var u=v.__[0];v.__=v.__N,v.__N=void 0,u!==v.__[0]&&(i=!0)}}),!(!i&&r.__c.props===l)&&(!_||_.call(this,l,a,c))};g.u=!0;var _=g.shouldComponentUpdate,s=g.componentWillUpdate;g.componentWillUpdate=function(l,a,c){if(this.__e){var f=_;_=void 0,o(l,a,c),_=f}s&&s.call(this,l,a,c)},g.shouldComponentUpdate=o}return r.__N||r.__}function Ye(t,e){var n=de(W++,3);!S.__s&&Me(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function ee(t){return Y=5,Ze(function(){return{current:t}},[])}function Ze(t,e){var n=de(W++,7);return Me(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Xe(){for(var t;t=xe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(j),t.__H.__h.forEach(se),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){g=null,ke&&ke(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Le&&Le(t,e)},S.__r=function(t){Ne&&Ne(t),W=0;var e=(g=t.__c).__H;e&&(ne===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=G,n.__N=n.i=void 0})):(e.__h.forEach(j),e.__h.forEach(se),e.__h=[],W=0)),ne=g},S.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(xe.push(e)!==1&&we===S.requestAnimationFrame||((we=S.requestAnimationFrame)||et)(Xe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==G&&(n.__=n.__V),n.i=void 0,n.__V=G})),ne=g=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(j),n.__h=n.__h.filter(function(r){return!r.__||se(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],S.__e(r,n.__v)}}),Ae&&Ae(t,e)},S.unmount=function(t){Pe&&Pe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{j(r)}catch(o){e=o}}),n.__H=void 0,e&&S.__e(e,n.__v))};var Te=typeof requestAnimationFrame=="function";function et(t){var e,n=function(){clearTimeout(r),Te&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Te&&(e=requestAnimationFrame(n))}function j(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function se(t){var e=g;t.__c=t.__(),g=e}function Me(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function We(t,e){return typeof e=="function"?e(t):e}function $e(t,e){let n=0,r=-1;for(let o=t.length-1;o>=0;o--)e(t[o])?(n++,r===-1&&(r=o)):r>=0&&(t.splice(o+1,r-o),r=-1);return r>=0&&t.splice(0,r+1),n}function tt(t){return t+1}function B(){return Oe(tt,0)[1]}function pe(...t){let e;for(let n of t)n&&(e=e?e+" "+n:n);return e}function nt(t){const e=B(),n=ee();return n.current||(n.current=r=>{localStorage.setItem(t,r),e()}),[localStorage.getItem(t),n.current]}function rt(t){const e=B(),n=ee();n.current||(n.current=o=>{o===void 0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(o)),e()});let r=localStorage.getItem(t);return[r?JSON.parse(r):void 0,n.current]}function ot(t){const e=B(),n=ee();return n.current?Object.is(n.current.propValue,t)||(n.current.stateValue=n.current.propValue=t):n.current={propValue:t,stateValue:t,updater:r=>{n.current.stateValue=r,e()}},[n.current.stateValue,n.current.updater]}function _t(t){let e="",n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o++)e+=String.fromCharCode(n[o]);return btoa(e)}function re(t){if(!t||t.byteLength===0)return"";let n=_t(t).replaceAll("/","_").replaceAll("+","-");return n[n.length-2]==="="?n=n.substring(0,n.length-2):n[n.length-1]==="="&&(n=n.substring(0,n.length-1)),n}var it=0;function p(t,e,n,r,o,_){var s,l,a={};for(l in e)l=="ref"?s=e[l]:a[l]=e[l];var c={type:t,props:a,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--it,__i:-1,__u:0,__source:o,__self:_};if(typeof t=="function"&&(s=t.defaultProps))for(l in s)a[l]===void 0&&(a[l]=s[l]);return h.vnode&&h.vnode(c),c}function st({icon:t,...e}){return p("span",{...e,class:"Icon"+(t?t.length>1?" material-icons-round":" fa":"")+(e.class?" "+e.class:""),children:t})}function lt({title:t,titleLpk:e,size:n,isDefault:r,class:o,children:_,...s}){return p("button",{...s,type:"button",class:"Button "+(n??"normal")+(r?" default":"")+(o?" "+o:""),children:_})}function le({icon:t,class:e,title:n,titleLpk:r,...o}){return p(lt,{...o,class:pe(e,"icon-button"),children:p(st,{icon:t})})}function D(t){return p(le,{...t,size:"tiny"})}function ct({value:t,onChange:e,class:n,disabled:r,...o}){let[_,s]=ot(t);return p("label",{...o,class:"ToggleSwitch"+(n?" "+n:""),children:[p("input",{type:"checkbox",checked:_,disabled:r,onChange:l=>{s(l.currentTarget.checked),e==null||e(l.currentTarget.checked)}}),p("span",{class:"slider"})]})}class at{constructor(){O(this,"listeners",[])}addListener(e,n=this){this.listeners.push({callback:e,owner:n})}removeListener(e){$e(this.listeners,n=>n.callback===e)}removeAllListener(e=this){$e(this.listeners,n=>n.owner===e)}dispatch(...e){for(let n of this.listeners.slice())n.callback.call(n.owner,...e)}}var U;class ut extends at{constructor(n){super();z(this,U,void 0);I(this,U,n)}get value(){return T(this,U)}set value(n){Object.is(T(this,U),n)||(I(this,U,n),this.dispatch(n))}}U=new WeakMap;function ft(t){var r;const e=B(),n=ee();return n.current||(n.current={effect:()=>()=>{var o;return(o=n.current.p)==null?void 0:o.removeListener(e)},empty:[]}),n.current.p!==t&&((r=n.current.p)==null||r.removeListener(e),t==null||t.addListener(e),n.current.p=t),Ye(n.current.effect,n.current.empty),t.value}var F,H;class dt{constructor(){z(this,F,void 0);z(this,H,void 0);O(this,"canInstall",new ut(!1));O(this,"applicationServerKey","BFdZmt7SC_NIHaGgjqzzdd-Gn0ofMctrnz5zc8Ew3n7P-yyBoT-Ih_WUi4IL61l2gwnaNoSDf4LQ_17uvgmOBvs");O(this,"pushSubsciptionForServer");let e=localStorage.getItem("pushSubscription");this.pushSubsciptionForServer=e?JSON.parse(e):void 0,window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),I(this,F,n),this.canInstall.value=!0}),isSecureContext&&(async()=>{try{I(this,H,await navigator.serviceWorker.register("service-worker.js"))}catch{console.log("navigator.serviceWorker.register failed")}})()}get displayMode(){return document.referrer.startsWith("android-app://")?"twa":navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser"}async install(){const{outcome:e,platform:n}=await T(this,F).prompt();return I(this,F,void 0),e==="accepted"}async subscribePushNotifications(){if(await Notification.requestPermission()!=="granted")return!1;let n=await T(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey});if(re(n.options.applicationServerKey)!==this.applicationServerKey){if(console.log("Application Server Key has changed. Re-subscribing."),!await n.unsubscribe())return!1;n=await T(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey})}return n?(localStorage.setItem("pushSubscription",JSON.stringify(this.pushSubsciptionForServer={endpoint:n.endpoint,auth:re(n.getKey("auth")),p256dh:re(n.getKey("p256dh"))})),!0):(localStorage.removeItem("pushSubscription"),!1)}async unsubscribePushNotifications(){let e=await T(this,H).pushManager.getSubscription();e&&await e.unsubscribe(),this.pushSubsciptionForServer=void 0,localStorage.removeItem("pushSubscription")}}F=new WeakMap,H=new WeakMap;const L=new dt;function pt({name:t,address:e,onNavigate:n,onDelete:r,onUp:o,onDown:_}){let[s,l]=E(!1),a=e;return L.pushSubsciptionForServer&&(a+="?"+new URLSearchParams([["endpoint",L.pushSubsciptionForServer.endpoint],["auth",L.pushSubsciptionForServer.auth],["p256dh",L.pushSubsciptionForServer.p256dh]]).toString()),p("div",{class:"ServerCard",children:[p("img",{src:e+"logo.webp"}),p("a",{href:a,onClick:c=>{c.preventDefault(),n()},children:[p("h3",{children:t}),p("span",{children:e})]}),p("div",{class:pe("buttons",s&&"show"),children:[p(D,{class:"doublerow",icon:s?"":"",onClick:()=>l(!s)}),p(D,{icon:"",onClick:o,disabled:!o}),p(D,{icon:"",onClick:_,disabled:!_}),p(D,{class:"doublerow",icon:"",onClick:r})]})]})}function ht(){let[t,e]=E(""),[n,r]=E(!1),[o,_]=E(""),[s,l]=E(""),[a,c]=E(""),[f,i]=rt("servers"),[v,u]=nt("enablePush");const y=B();let w=ft(L.canInstall),b=a.toUpperCase();return t?p("iframe",{src:t,style:{border:"none",margin:"0",padding:"0",display:"grid",width:"100%",height:"100%"}}):p("main",{class:"App",children:[p("header",{children:[p("div",{class:"title",children:[p("h1",{children:"webSCADA Launcher"}),w&&p(le,{size:"small",icon:"",onClick:async()=>{await L.install(),y()}}),p(le,{size:"small",icon:n?"":"+",onClick:()=>r(!n)})]}),p("div",{class:pe("AddSystem",n&&"show"),children:[p("input",{placeholder:"Name",value:o,onInput:d=>_(d.currentTarget.value)}),p("input",{placeholder:"HTTP address i.e. https://demo.webscada.hu/",value:s,onInput:d=>l(d.currentTarget.value)}),p(D,{icon:"+",onClick:()=>{i(f?[...f,{name:o,address:s}]:[{name:o,address:s}]),r(!1),l("")}})]}),p("div",{class:"enable-notification",children:[p(ct,{value:!!v,onChange:async d=>{u(d?"enabled":""),d?await L.subscribePushNotifications()?(new Notification("webSCADA Launcher Test Notification",{body:"You successfully enabled notifications for this app and are able to receive alert notifications from webSCADA systems."}),y()):(u(""),alert("Notifications are denied")):(await L.unsubscribePushNotifications(),y())}}),p("span",{children:"Enable push notifications"})]}),p("div",{class:"search",children:p("input",{placeholder:"Search",value:a,onInput:d=>c(d.currentTarget.value)})})]}),p("div",{class:"content",children:[f==null?void 0:f.filter(d=>!a||d.name.toUpperCase().includes(b)||d.address.toLocaleUpperCase().includes(b)).map((d,m,N)=>p(pt,{name:d.name,address:d.address,onNavigate:()=>e(d.address),onDelete:()=>i(f.filter(A=>d!==A)),onUp:m>0?()=>i(f.map((A,k)=>k===m-1?d:k===m?N[k-1]:A)):void 0,onDown:m<N.length-1?()=>i(f.map((A,k)=>k===m+1?d:k===m?N[k+1]:A)):void 0},d.address)),!(f!=null&&f.length)&&p("div",{class:"tutorial",children:[p("p",{children:["There are no servers added yet. Click on the plus icon ",p(D,{icon:"+"})," in the top right corner and add a webSCADA server to start using this app."]}),p("p",{children:"Note that push notifications will only come once you enable them and log in to an added server. Adding a server without logging in is not enough to authenticate yourself with that webSCADA server."})]})]}),p("footer",{})]})}Qe(p(ht,{}),document.body);
