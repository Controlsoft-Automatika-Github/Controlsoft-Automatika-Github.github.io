var xe=Object.defineProperty;var Me=(t,e,n)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var D=(t,e,n)=>(Me(t,typeof e!="symbol"?e+"":e,n),n),he=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>(he(t,e,"read from private field"),n?n.call(t):e.get(t)),R=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},F=(t,e,n,r)=>(he(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var X,v,Ue,$,ve,Ee,_e,x={},ce=[],Be=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ue=Array.isArray;function T(t,e){for(var n in e)t[n]=e[n];return t}function $e(t){var e=t.parentNode;e&&e.removeChild(t)}function Ve(t,e,n){var r,o,i,s={};for(i in e)i=="key"?r=e[i]:i=="ref"?o=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?X.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)s[i]===void 0&&(s[i]=t.defaultProps[i]);return J(t,s,r,o,null)}function J(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Ue,__i:-1,__u:0};return o==null&&v.vnode!=null&&v.vnode(i),i}function ee(t){return t.children}function G(t,e){this.props=t,this.context=e}function O(t,e){if(e==null)return t.__?O(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?O(t):null}function Ke(t,e,n){var r,o=t.__v,i=o.__e,s=t.__P;if(s)return(r=T({},o)).__v=o.__v+1,v.vnode&&v.vnode(r),fe(s,r,o,t.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,e,i??O(o),!!(32&o.__u),n),r.__v=o.__v,r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Ie(r),r}function Ie(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ie(t)}}function me(t){(!t.__d&&(t.__d=!0)&&$.push(t)&&!Y.__r++||ve!==v.debounceRendering)&&((ve=v.debounceRendering)||Ee)(Y)}function Y(){var t,e,n,r=[],o=[];for($.sort(_e);t=$.shift();)t.__d&&(n=$.length,e=Ke(t,r,o)||e,n===0||$.length>n?(se(r,e,o),o.length=r.length=0,e=void 0,$.sort(_e)):e&&v.__c&&v.__c(e,ce));e&&se(r,e,o),Y.__r=0}function He(t,e,n,r,o,i,s,l,c,a,d){var _,h,u,g,k,b=r&&r.__k||ce,f=e.length;for(n.__d=c,Re(n,e,b),c=n.__d,_=0;_<f;_++)(u=n.__k[_])!=null&&typeof u!="boolean"&&typeof u!="function"&&(h=u.__i===-1?x:b[u.__i]||x,u.__i=_,fe(t,u,h,o,i,s,l,c,a,d),g=u.__e,u.ref&&h.ref!=u.ref&&(h.ref&&de(h.ref,null,u),d.push(u.ref,u.__c||g,u)),k==null&&g!=null&&(k=g),65536&u.__u||h.__k===u.__k?c=De(u,c,t):typeof u.type=="function"&&u.__d!==void 0?c=u.__d:g&&(c=g.nextSibling),u.__d=void 0,u.__u&=-196609);n.__d=c,n.__e=k}function Re(t,e,n){var r,o,i,s,l,c=e.length,a=n.length,d=a,_=0;for(t.__k=[],r=0;r<c;r++)(o=t.__k[r]=(o=e[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?J(null,o,null,null,o):ue(o)?J(ee,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?J(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=t,o.__b=t.__b+1,l=qe(o,n,s=r+_,d),o.__i=l,i=null,l!==-1&&(d--,(i=n[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&_--,typeof o.type!="function"&&(o.__u|=65536)):l!==s&&(l===s+1?_++:l>s?d>c-s?_+=l-s:_--:_=l<s&&l==s-1?l-s:0,l!==r+_&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&!(131072&i.__u)&&(i.__e==t.__d&&(t.__d=O(i)),le(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<a;r++)(i=n[r])!=null&&!(131072&i.__u)&&(i.__e==t.__d&&(t.__d=O(i)),le(i,i))}function De(t,e,n){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=De(r[o],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function qe(t,e,n,r){var o=t.key,i=t.type,s=n-1,l=n+1,c=e[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;s>=0||l<e.length;){if(s>=0){if((c=e[s])&&!(131072&c.__u)&&o==c.key&&i===c.type)return s;s--}if(l<e.length){if((c=e[l])&&!(131072&c.__u)&&o==c.key&&i===c.type)return l;l++}}return-1}function ge(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Be.test(e)?n:n+"px"}function q(t,e,n,r,o){var i;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||ge(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||ge(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,i?be:ye,i)):t.removeEventListener(e,i?be:ye,i);else{if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function ye(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(v.event?v.event(t):t)}}function be(t){if(this.l)return this.l[t.type+!0](v.event?v.event(t):t)}function fe(t,e,n,r,o,i,s,l,c,a){var d,_,h,u,g,k,b,f,m,C,N,w,W,V,re,P=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[l=e.__e=n.__e]),(d=v.__b)&&d(e);e:if(typeof P=="function")try{if(f=e.props,m=(d=P.contextType)&&r[d.__c],C=d?m?m.props.value:d.__:r,n.__c?b=(_=e.__c=n.__c).__=_.__E:("prototype"in P&&P.prototype.render?e.__c=_=new P(f,C):(e.__c=_=new G(f,C),_.constructor=P,_.render=Ge),m&&m.sub(_),_.props=f,_.state||(_.state={}),_.context=C,_.__n=r,h=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),P.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=T({},_.__s)),T(_.__s,P.getDerivedStateFromProps(f,_.__s))),u=_.props,g=_.state,_.__v=e,h)P.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(P.getDerivedStateFromProps==null&&f!==u&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(f,C),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(f,_.__s,C)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(_.props=f,_.state=_.__s,_.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(K){K&&(K.__=e)}),N=0;N<_._sb.length;N++)_.__h.push(_._sb[N]);_._sb=[],_.__h.length&&s.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(f,_.__s,C),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(u,g,k)})}if(_.context=C,_.props=f,_.__P=t,_.__e=!1,w=v.__r,W=0,"prototype"in P&&P.prototype.render){for(_.state=_.__s,_.__d=!1,w&&w(e),d=_.render(_.props,_.state,_.context),V=0;V<_._sb.length;V++)_.__h.push(_._sb[V]);_._sb=[]}else do _.__d=!1,w&&w(e),d=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++W<25);_.state=_.__s,_.getChildContext!=null&&(r=T(T({},r),_.getChildContext())),h||_.getSnapshotBeforeUpdate==null||(k=_.getSnapshotBeforeUpdate(u,g)),He(t,ue(re=d!=null&&d.type===ee&&d.key==null?d.props.children:d)?re:[re],e,n,r,o,i,s,l,c,a),_.base=e.__e,e.__u&=-161,_.__h.length&&s.push(_),b&&(_.__E=_.__=null)}catch(K){e.__v=null,c||i!=null?(e.__e=l,e.__u|=c?160:32,i[i.indexOf(l)]=null):(e.__e=n.__e,e.__k=n.__k),v.__e(K,e,n)}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Je(n.__e,e,n,r,o,i,s,c,a);(d=v.diffed)&&d(e)}function se(t,e,n){for(var r=0;r<n.length;r++)de(n[r],n[++r],n[++r]);v.__c&&v.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(i){i.call(o)})}catch(i){v.__e(i,o.__v)}})}function Je(t,e,n,r,o,i,s,l,c){var a,d,_,h,u,g,k,b=n.props,f=e.props,m=e.type;if(m==="svg"&&(o=!0),i!=null){for(a=0;a<i.length;a++)if((u=i[a])&&"setAttribute"in u==!!m&&(m?u.localName===m:u.nodeType===3)){t=u,i[a]=null;break}}if(t==null){if(m===null)return document.createTextNode(f);t=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,f.is&&f),i=null,l=!1}if(m===null)b===f||l&&t.data===f||(t.data=f);else{if(i=i&&X.call(t.childNodes),b=n.props||x,!l&&i!=null)for(b={},a=0;a<t.attributes.length;a++)b[(u=t.attributes[a]).name]=u.value;for(a in b)u=b[a],a=="children"||(a=="dangerouslySetInnerHTML"?_=u:a==="key"||a in f||q(t,a,null,u,o));for(a in f)u=f[a],a=="children"?h=u:a=="dangerouslySetInnerHTML"?d=u:a=="value"?g=u:a=="checked"?k=u:a==="key"||l&&typeof u!="function"||b[a]===u||q(t,a,u,b[a],o);if(d)l||_&&(d.__html===_.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(_&&(t.innerHTML=""),He(t,ue(h)?h:[h],e,n,r,o&&m!=="foreignObject",i,s,i?i[0]:n.__k&&O(n,0),l,c),i!=null)for(a=i.length;a--;)i[a]!=null&&$e(i[a]);l||(a="value",g!==void 0&&(g!==t[a]||m==="progress"&&!g||m==="option"&&g!==b[a])&&q(t,a,g,b[a],!1),a="checked",k!==void 0&&k!==t[a]&&q(t,a,k,b[a],!1))}return t}function de(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){v.__e(r,n)}}function le(t,e,n){var r,o;if(v.unmount&&v.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||de(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){v.__e(i,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&le(r[o],e,n||typeof t.type!="function");n||t.__e==null||$e(t.__e),t.__=t.__e=t.__d=void 0}function Ge(t,e,n){return this.constructor(t,n)}function je(t,e,n){var r,o,i,s;v.__&&v.__(t,e),o=(r=typeof n=="function")?null:n&&n.__k||e.__k,i=[],s=[],fe(e,t=(!r&&n||e).__k=Ve(ee,null,[t]),o||x,x,e.ownerSVGElement!==void 0,!r&&n?[n]:o?null:e.firstChild?X.call(e.childNodes):null,i,!r&&n?n:o?o.__e:e.firstChild,r,s),t.__d=void 0,se(i,t,s)}X=ce.slice,v={__e:function(t,e,n,r){for(var o,i,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(t)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),s=o.__d),s)return o.__E=o}catch(l){t=l}throw t}},Ue=0,G.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=T({},this.state),typeof t=="function"&&(t=t(T({},n),this.props)),t&&T(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),me(this))},G.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),me(this))},G.prototype.render=ee,$=[],Ee=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_e=function(t,e){return t.__v.__b-e.__v.__b},Y.__r=0;var M,y,oe,Se,Z=0,Fe=[],j=[],S=v,we=S.__b,ke=S.__r,Ce=S.diffed,Ne=S.__c,Pe=S.unmount,Ae=S.__;function pe(t,e){S.__h&&S.__h(y,t,Z||e),Z=0;var n=y.__H||(y.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:j}),n.__[t]}function L(t){return Z=1,ze(We,t)}function ze(t,e,n){var r=pe(M++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):We(void 0,e),function(l){var c=r.__N?r.__N[0]:r.__[0],a=r.t(c,l);c!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=y,!y.u)){var o=function(l,c,a){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(h){return!!h.__c});if(d.every(function(h){return!h.__N}))return!i||i.call(this,l,c,a);var _=!1;return d.forEach(function(h){if(h.__N){var u=h.__[0];h.__=h.__N,h.__N=void 0,u!==h.__[0]&&(_=!0)}}),!(!_&&r.__c.props===l)&&(!i||i.call(this,l,c,a))};y.u=!0;var i=y.shouldComponentUpdate,s=y.componentWillUpdate;y.componentWillUpdate=function(l,c,a){if(this.__e){var d=i;i=void 0,o(l,c,a),i=d}s&&s.call(this,l,c,a)},y.shouldComponentUpdate=o}return r.__N||r.__}function Qe(t,e){var n=pe(M++,3);!S.__s&&Oe(n.__H,e)&&(n.__=t,n.i=e,y.__H.__h.push(n))}function te(t){return Z=5,Ye(function(){return{current:t}},[])}function Ye(t,e){var n=pe(M++,7);return Oe(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function Ze(){for(var t;t=Fe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Q),t.__H.__h.forEach(ae),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){y=null,we&&we(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ae&&Ae(t,e)},S.__r=function(t){ke&&ke(t),M=0;var e=(y=t.__c).__H;e&&(oe===y?(e.__h=[],y.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=j,n.__N=n.i=void 0})):(e.__h.forEach(Q),e.__h.forEach(ae),e.__h=[],M=0)),oe=y},S.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Fe.push(e)!==1&&Se===S.requestAnimationFrame||((Se=S.requestAnimationFrame)||Xe)(Ze)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==j&&(n.__=n.__V),n.i=void 0,n.__V=j})),oe=y=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Q),n.__h=n.__h.filter(function(r){return!r.__||ae(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],S.__e(r,n.__v)}}),Ne&&Ne(t,e)},S.unmount=function(t){Pe&&Pe(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Q(r)}catch(o){e=o}}),n.__H=void 0,e&&S.__e(e,n.__v))};var Le=typeof requestAnimationFrame=="function";function Xe(t){var e,n=function(){clearTimeout(r),Le&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Le&&(e=requestAnimationFrame(n))}function Q(t){var e=y,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),y=e}function ae(t){var e=y;t.__c=t.__(),y=e}function Oe(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function We(t,e){return typeof e=="function"?e(t):e}function Te(t,e){let n=0,r=-1;for(let o=t.length-1;o>=0;o--)e(t[o])?(n++,r===-1&&(r=o)):r>=0&&(t.splice(o+1,r-o),r=-1);return r>=0&&t.splice(0,r+1),n}function et(t){return t+1}function B(){return ze(et,0)[1]}function ne(...t){let e;for(let n of t)n&&(e=e?e+" "+n:n);return e}function tt(t){const e=B(),n=te();return n.current||(n.current=r=>{localStorage.setItem(t,r),e()}),[localStorage.getItem(t),n.current]}function nt(t){const e=B(),n=te();n.current||(n.current=o=>{o===void 0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(o)),e()});let r=localStorage.getItem(t);return[r?JSON.parse(r):void 0,n.current]}function rt(t){const e=B(),n=te();return n.current?Object.is(n.current.propValue,t)||(n.current.stateValue=n.current.propValue=t):n.current={propValue:t,stateValue:t,updater:r=>{n.current.stateValue=r,e()}},[n.current.stateValue,n.current.updater]}function ot(t){let e="",n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o++)e+=String.fromCharCode(n[o]);return btoa(e)}function ie(t){if(!t||t.byteLength===0)return"";let n=ot(t).replace(/\//g,"_").replace(/\+/g,"-");return n[n.length-2]==="="?n=n.substring(0,n.length-2):n[n.length-1]==="="&&(n=n.substring(0,n.length-1)),n}var it=0;function p(t,e,n,r,o,i){var s,l,c={};for(l in e)l=="ref"?s=e[l]:c[l]=e[l];var a={type:t,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--it,__i:-1,__u:0,__source:o,__self:i};if(typeof t=="function"&&(s=t.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return v.vnode&&v.vnode(a),a}function _t({icon:t,...e}){return p("span",{...e,class:"Icon"+(t?t.length>1?" material-icons-round":" fa":"")+(e.class?" "+e.class:""),children:t})}function st({title:t,titleLpk:e,size:n,isDefault:r,class:o,children:i,...s}){return p("button",{...s,type:"button",class:"Button "+(n??"normal")+(r?" default":"")+(o?" "+o:""),children:i})}function A({icon:t,class:e,title:n,titleLpk:r,...o}){return p(st,{...o,class:ne(e,"icon-button"),children:p(_t,{icon:t})})}function lt(t){return p(A,{...t,size:"tiny"})}function at({value:t,onChange:e,class:n,disabled:r,...o}){let[i,s]=rt(t);return p("label",{...o,class:"ToggleSwitch"+(n?" "+n:""),children:[p("input",{type:"checkbox",checked:i,disabled:r,onChange:l=>{s(l.currentTarget.checked),e==null||e(l.currentTarget.checked)}}),p("span",{class:"slider"})]})}class ct{constructor(){D(this,"listeners",[])}addListener(e,n=this){this.listeners.push({callback:e,owner:n})}removeListener(e){Te(this.listeners,n=>n.callback===e)}removeAllListener(e=this){Te(this.listeners,n=>n.owner===e)}dispatch(...e){for(let n of this.listeners.slice())n.callback.call(n.owner,...e)}}var I;class ut extends ct{constructor(n){super();R(this,I,void 0);F(this,I,n)}get value(){return E(this,I)}set value(n){Object.is(E(this,I),n)||(F(this,I,n),this.dispatch(n))}}I=new WeakMap;function ft(t){var r;const e=B(),n=te();return n.current||(n.current={effect:()=>()=>{var o;return(o=n.current.p)==null?void 0:o.removeListener(e)},empty:[]}),n.current.p!==t&&((r=n.current.p)==null||r.removeListener(e),t==null||t.addListener(e),n.current.p=t),Qe(n.current.effect,n.current.empty),t.value}var z,H;class dt{constructor(){R(this,z,void 0);R(this,H,void 0);D(this,"canInstall",new ut(!1));D(this,"applicationServerKey","BFdZmt7SC_NIHaGgjqzzdd-Gn0ofMctrnz5zc8Ew3n7P-yyBoT-Ih_WUi4IL61l2gwnaNoSDf4LQ_17uvgmOBvs");D(this,"pushSubsciptionForServer");D(this,"isiOS");this.isiOS=function(){var n=function(){var r=new Audio;return r.volume=.5,r.volume===1};return/iPad|iPhone|iPod/.test(navigator.userAgent)?!0:navigator.userAgent.includes("Macintosh")&&(navigator.maxTouchPoints>=1||n())}();let e=localStorage.getItem("pushSubscription");this.pushSubsciptionForServer=e?JSON.parse(e):void 0,window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),F(this,z,n),this.canInstall.value=!0}),isSecureContext&&(async()=>{try{F(this,H,await navigator.serviceWorker.register("service-worker.js"))}catch{console.log("navigator.serviceWorker.register failed")}})()}get displayMode(){return document.referrer.startsWith("android-app://")?"twa":navigator.standalone||window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser"}async install(){const{outcome:e,platform:n}=await E(this,z).prompt();return F(this,z,void 0),e==="accepted"}async subscribePushNotifications(){if(await Notification.requestPermission()!=="granted")return!1;let n=await E(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey});if(ie(n.options.applicationServerKey)!==this.applicationServerKey){if(console.log("Application Server Key has changed. Re-subscribing."),!await n.unsubscribe())return!1;n=await E(this,H).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.applicationServerKey})}return n?(localStorage.setItem("pushSubscription",JSON.stringify(this.pushSubsciptionForServer={endpoint:n.endpoint,auth:ie(n.getKey("auth")),p256dh:ie(n.getKey("p256dh"))})),!0):(localStorage.removeItem("pushSubscription"),!1)}async unsubscribePushNotifications(){let e=await E(this,H).pushManager.getSubscription();e&&await e.unsubscribe(),this.pushSubsciptionForServer=void 0,localStorage.removeItem("pushSubscription")}}z=new WeakMap,H=new WeakMap;const U=new dt;function pt({show:t,defaultName:e,defaultAddress:n,onChange:r}){let[o,i]=L(e),[s,l]=L(n);return p("div",{class:ne("ServerEditor",t&&"show"),children:[p("div",{children:[p("input",{placeholder:"Name",value:o,onInput:c=>i(c.currentTarget.value)}),p("input",{placeholder:"HTTP address i.e. https://demo.webscada.hu/",value:s,onInput:c=>l(c.currentTarget.value),autocorrect:"off",autocapitalize:"none",autocomplete:"off"})]}),p(A,{size:"small",icon:"",disabled:!s||!o,onClick:()=>{s.toLowerCase().startsWith("http")||(s="https://"+s),s=new URL(s).origin+"/",r(o,s),l(""),i("")}}),p(A,{size:"small",icon:"",onClick:()=>r(void 0,void 0)})]})}function ht({name:t,address:e,onNavigate:n,onChange:r,onDelete:o,onUp:i,onDown:s}){let[l,c]=L(!1),[a,d]=L(!1),_=e.substring(e.indexOf("/"));return U.pushSubsciptionForServer&&(_+="?"+new URLSearchParams([["endpoint",U.pushSubsciptionForServer.endpoint],["auth",U.pushSubsciptionForServer.auth],["p256dh",U.pushSubsciptionForServer.p256dh]]).toString()),p("div",{class:"ServerCard",children:[p("div",{class:"content",children:[p("img",{src:e+"media/o.logo.webp",onError:h=>h.currentTarget.src="/icon128.png"}),p("a",{href:_,onClick:h=>{h.preventDefault(),n()},children:[p("h3",{children:t}),p("span",{children:e})]}),p("div",{class:ne("buttons",l&&"show"),children:[p(A,{size:"small",class:"doublerow",icon:l?"":"",onClick:()=>c(!l)}),p(A,{size:"small",icon:"",onClick:()=>d(!a)}),p(A,{size:"small",icon:"",onClick:i,disabled:!i}),p(A,{size:"small",icon:"",onClick:o}),p(A,{size:"small",icon:"",onClick:s,disabled:!s})]})]}),a&&p(pt,{show:!0,defaultName:t,defaultAddress:e,onChange:(h,u)=>{h&&u&&r(h,u),d(!1)}})]})}function vt(){let[t,e]=L(""),[n,r]=L(!1),[o,i]=L(""),[s,l]=L(""),[c,a]=L(""),[d,_]=nt("servers"),[h,u]=tt("enablePush");const g=B();let k=ft(U.canInstall),b=c.toUpperCase();return t?p("iframe",{src:t,style:{border:"none",margin:"0",padding:"0",display:"grid",width:"100%",height:"100%"}}):p("main",{class:"App",children:[p("header",{children:[p("div",{class:"title",children:[p("h1",{children:"webSCADA Launcher"}),k&&p(A,{size:"small",icon:"",onClick:async()=>{await U.install(),g()}}),p(A,{size:"small",icon:n?"":"+",onClick:()=>r(!n)})]}),p("div",{class:ne("AddSystem",n&&"show"),children:[p("input",{placeholder:"Name",value:o,onInput:f=>i(f.currentTarget.value)}),p("input",{placeholder:"HTTP address i.e. https://demo.webscada.hu/",value:s,onInput:f=>l(f.currentTarget.value),autocorrect:"off",autocapitalize:"none",autocomplete:"off"}),p(A,{size:"small",icon:"+",disabled:!s||!o,onClick:()=>{let f=s;f.toLowerCase().startsWith("http")||(f="https://"+f),f=new URL(f).origin+"/",_(d?[...d,{name:o,address:f}]:[{name:o,address:f}]),r(!1),l(""),i("")}})]}),p("div",{class:"enable-notification",children:[p(at,{value:!!h,onChange:async f=>{u(f?"enabled":""),f?await U.subscribePushNotifications()?(new Notification("webSCADA Launcher Test Notification",{body:"You successfully enabled notifications for this app and are able to receive alert notifications from webSCADA systems."}),g()):(u(""),alert("Notifications are denied")):(await U.unsubscribePushNotifications(),g())}}),p("span",{children:"Enable push notifications"})]}),p("div",{class:"search",children:p("input",{placeholder:"Search",value:c,onInput:f=>a(f.currentTarget.value),autocorrect:"off",autocapitalize:"none",autocomplete:"off"})})]}),p("div",{class:"content",children:[d==null?void 0:d.filter(f=>!c||f.name.toUpperCase().includes(b)||f.address.toLocaleUpperCase().includes(b)).map((f,m,C)=>p(ht,{name:f.name,address:f.address,onNavigate:()=>e(f.address),onChange:(N,w)=>_(d.map(W=>f!==W?W:{name:N,address:w})),onDelete:()=>_(d.filter(N=>f!==N)),onUp:m>0?()=>_(d.map((N,w)=>w===m-1?f:w===m?C[w-1]:N)):void 0,onDown:m<C.length-1?()=>_(d.map((N,w)=>w===m+1?f:w===m?C[w+1]:N)):void 0},f.address)),!(d!=null&&d.length)&&p("div",{class:"tutorial",children:[p("p",{children:["There are no servers added yet. Click on the plus icon ",p(lt,{icon:"+"})," in the top right corner and add a webSCADA server to start using this app."]}),p("p",{children:"Note that push notifications will only come once you enable them and log in to an added server. Adding a server without logging in is not enough to authenticate yourself with that webSCADA server."})]})]}),p("footer",{})]})}je(p(vt,{}),document.body);
